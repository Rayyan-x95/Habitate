# Habitate â€” Detekt Configuration
# See: https://detekt.dev/docs/rules/

build:
  maxIssues: 0
  excludeCorrectable: false

config:
  validation: true

complexity:
  LongMethod:
    active: true
    threshold: 80
  LongParameterList:
    active: true
    functionThreshold: 8
    constructorThreshold: 8
    ignoreDefaultParameters: true
    ignoreDataClasses: true
    ignoreAnnotatedParameter: ["Inject"]
  TooManyFunctions:
    active: true
    thresholdInFiles: 25
    thresholdInClasses: 20
    thresholdInInterfaces: 15
    thresholdInObjects: 15
    ignoreOverridden: true
  NestedBlockDepth:
    active: true
    threshold: 5
  CyclomaticComplexMethod:
    active: true
    threshold: 20

style:
  MagicNumber:
    active: false # Too noisy for UI code with spacing/sizing values
  WildcardImport:
    active: true
    excludeImports:
      - "kotlinx.coroutines.*"
      - "kotlinx.coroutines.flow.*"
  ForbiddenComment:
    active: true
    comments:
      - value: "FIXME"
        reason: "Fixes should be addressed before merging"
      - value: "HACK"
        reason: "Hacks should be refactored into proper solutions"
  MaxLineLength:
    active: true
    maxLineLength: 140
    excludePackageStatements: true
    excludeImportStatements: true
    excludeCommentStatements: true
  ReturnCount:
    active: true
    max: 4
    excludeGuardClauses: true
  UnusedPrivateMember:
    active: true
    allowedNames: "_.*"
  UnnecessaryAbstractClass:
    active: true
  DataClassShouldBeImmutable:
    active: true

naming:
  FunctionNaming:
    active: true
    excludes: ["**/test/**", "**/androidTest/**"]
    functionPattern: "[a-z][a-zA-Z0-9]*"
    ignoreAnnotated: ["Composable"]
  TopLevelPropertyNaming:
    active: true
    constantPattern: "[A-Z][A-Za-z0-9]*"
  PackageNaming:
    active: true
    packagePattern: "[a-z]+(\\.[a-z][A-Za-z0-9]*)*"
  ClassNaming:
    active: true
    classPattern: "[A-Z][a-zA-Z0-9]*"

exceptions:
  TooGenericExceptionCaught:
    active: true
    exceptionNames:
      - "ArrayIndexOutOfBoundsException"
      - "Error"
      - "IllegalMonitorStateException"
      - "NullPointerException"
      - "IndexOutOfBoundsException"
    # Allow catching Exception in repositories (offline-first needs broad error handling)
    excludes: ["**/repository/**"]
  TooGenericExceptionThrown:
    active: true
    exceptionNames:
      - "Error"
      - "Exception"
      - "RuntimeException"
      - "Throwable"
  SwallowedException:
    active: true
    ignoredExceptionTypes:
      - "InterruptedException"
      - "MalformedURLException"
      - "NumberFormatException"
      - "ParseException"

performance:
  SpreadOperator:
    active: false # Common in Compose, not a real perf issue
  ForEachOnRange:
    active: true

empty-blocks:
  EmptyCatchBlock:
    active: true
    allowedExceptionNameRegex: "_|ignore.*"
  EmptyFunctionBlock:
    active: true
    ignoreOverridden: true

coroutines:
  GlobalCoroutineUsage:
    active: true
  RedundantSuspendModifier:
    active: true
  SuspendFunWithFlowReturnType:
    active: true
